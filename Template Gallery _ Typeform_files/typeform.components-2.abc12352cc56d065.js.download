!function($){var CoolCheckbox=function(elem,opts){function toogle(){return $wrapper.is(".disabled")||move(!elem.is(":checked"),"fast",!0),!1}function move(value,speed,trigger){trigger=void 0===trigger||trigger,speed=void 0!==speed?speed:options.animationSpeed,$wrapper.attr("data-qa",value);var leftVal=value?0:-labelWidth;$mov.animate({left:leftVal},{duration:speed,step:function(now,fx){now>-labelWidth/2?($backgroundLeft.css("z-index","1"),$backgroundRight.css("z-index","0")):($backgroundLeft.css("z-index","0"),$backgroundRight.css("z-index","1"))},complete:setTimeout(function(){elem.prop("checked",value),trigger&&elem.trigger("change",elem)},"fast")})}function disable(disabled){elem.prop("disabled",disabled),disabled?$wrapper.addClass("disabled"):$wrapper.removeClass("disabled")}var defaults={checkedLabel:"ON",uncheckedLabel:"OFF",animationSpeed:75,className:""},options=$.extend({},defaults,opts),$wrapper=$("<div class='wrapper coolCheckbox "+options.className+"'></div>"),$mov=$("<div class='mov'></div>"),$on=$("<div class='on'>"+options.checkedLabel+"</div>"),$off=$("<div class='off'>"+options.uncheckedLabel+"</div>"),$front=$("<div class='front'></div>"),$backgroundLeft=$("<div class='background left'></div>"),$backgroundRight=$("<div class='background right'></div>"),labelWidth=0;elem.hide().after($wrapper.append($mov.append($on,$front,$off),$backgroundLeft,$backgroundRight)),labelWidth=$on.width(),0===labelWidth&&(labelWidth=30),move(elem.is(":checked"),0,!1),disable(elem.is(":disabled")),$wrapper.bind("click",toogle),elem.trigger("ready.coolCheckbox"),this.checked=function(value,trigger){move(value,"fast",trigger)},this.disabled=function(disabled){disable(disabled)},this.getEl=function(){return $wrapper},this.val=function(){return elem.is(":checked")}};$.fn.coolCheckbox=function(opts){return this.each(function(){var elem=$(this);if(!elem.data("coolCheckbox")){var coolCheckbox=new CoolCheckbox(elem,opts);elem.data("coolCheckbox",coolCheckbox)}})}}(jQuery);
!function($){var name="requestManager",defaults={wait:.2},inProgress=!1,doRequest=function(url,type,data){return $.ajax({url:url,type:type,data:data})},decodeJsonResponse=function(response){if(_(response).isString())try{decoded=JSON.parse(response)}catch(error){console.error("Could not json decode response",error),decoded={}}finally{return decoded}if(_(response).isObject()&&_(response).has("responseText"))return decodeJsonResponse(response.responseText);if(!_(response).isObject())throw new Error("Wrong argument provided");return response},methods={get:function(key){return $(this).data(name)[key]},set:function(args){return $.extend($(this).data(name),args),$(this)},has:function(key){return $(this).data(name).hasOwnProperty(key)},clear:function(key){return void 0!==$(this).data(name)&&delete $(this).data(name)[key],$(this)},processRequest:function(args,decode){decode=decode||!1;var $this=$(this),overwrite=args.overwrite;if(args=$.extend({},args),inProgress){if(!overwrite)return console.warn("Cannot accept more requests, one is in progress"),!1;$this.requestManager("abort");var timer=$this.requestManager("get","timer");clearTimeout(timer),$this.requestManager("clear","timer")}inProgress=!0;var start=(new Date).getTime(),until=start;_(args).has("type")||(args.type=$this.is("form")?$this.attr("method"):"POST"),!_(args).has("data")&&$this.is("form")&&(args.data=$this.serializeArray()),!_(args).has("url")&&$this.is("form")&&(args.url=$this.attr("action")),_(args).has("always")||(args.always=_.identity),_(args).has("success")||(args.success=_.identity),_(args).has("error")||(args.error=_.identity);var response,callback=_.identity,feedback=_.identity,release=function(response){inProgress=!1,$this.requestManager("clear","request"),$this.requestManager("clear","timer")},request=doRequest(args.url,args.type,args.data);return request.success(function(r){args.success&&(callback=_.partial(args.success,r)),feedback=_.partial(Typeform.Ajax.displayFeedback,r)}).error(function(r){try{response=decodeJsonResponse(r)}catch(e){response={success:!1,data:{},message:""}}if(Typeform.Ajax.hasSessionExpired(response))return void(callback=_.identity);feedback=_.partial(Typeform.Ajax.displayFeedback,response),decode||(response=r),callback=args.error?_.partial(args.error,response):notify.error}).always(function(r){r=decodeJsonResponse(r);var always=_.partial(args.always,r),finish=_.compose(release,feedback,always,callback),now=(new Date).getTime(),wait=until>now?until-now:0,timer=_.delay(finish,wait);$this.requestManager("set",{timer:timer})}),$this.requestManager("set",{request:request}),!0},abort:function(){return this.each(function(){$(this).requestManager("has","request")&&$(this).requestManager("get","request").abort()})},hasRequestInProgress:function(){return inProgress},init:function(args){return this.each(function(){var $this=$(this),data=$.extend({},defaults,args);$this.data(name,data)})}};$.fn[name]=function(method){return methods[method]?methods[method].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof method&&method?void $.error("Method "+method+" does not exist on jQuery."+name):methods.init.apply(this,arguments)}}(jQuery);